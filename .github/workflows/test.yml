name: Tests
on: 
    pull_request:
        branches:
            - main

env:
    DATABASE_URL: postgres://postgres:postgres@localhost:5432/postgres
jobs:
    unit-tests:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - uses: ./.github/actions/build
            - name: Run tests
              run: npm test
    integration-tests:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - uses: ./.github/actions/build
            - uses: ./.github/actions/docker-compose
            - name: Run tests
              run: npm test:int
